;function side_counter_block(){var obj={};obj.SRC=sc.url_prefix+'ajax/side/counter/';obj.DATATYPE='TEXT';$app.io.makeRequest(obj,function(r){$('.profile_left_mid').empty().append(r);});}
function prepare_cntry_array(callback){callback=callback||function(){};if(city_lookup!=void 0){var look_pid=[1001,1044];var india_id='';var filter_obj={};var l={};for(l.i in city_lookup){l.item=city_lookup[l.i];for(l.j in l.item.child){l.val=l.item.child[l.j];l.val.name=l.val.cdesc.replace('All ','');l.val.id=l.val.cid;if(generalFunctions.in_array(look_pid,l.item.pid)){$app.serverData.country_index[l.val.cid]=l.val;$app.serverData.country_state_index[l.val.cid]=$app.serverData.country_state_index[l.val.cid]||[];if(l.item.pid!=1001){$app.serverData.country_state_index[l.val.cid].push(l.val);l.val.pid=l.val.cid;}else{india_id=l.val.cid;}}else{$app.serverData.country_state_index[india_id]=$app.serverData.country_state_index[india_id]||[];if(filter_obj[l.item.pid]==undefined){$app.serverData.country_state_index[india_id].push(l.item);filter_obj[l.item.pid]=1;}
l.val.pid=india_id;}
if($app.serverData.cntry_state_index_obj[l.val.cid]==undefined){$app.serverData.cntry_state_index_obj[l.val.cid]=l.val;}}}
callback();}}
function prepare_cntry_state_array(obj,callback){obj=obj||{};callback=callback||function(){};var option=['<option value="-1">- Select City -</option>'];if($app.serverData.country_state_index[obj.id]!=undefined){obj.d=$app.serverData.country_state_index[obj.id];for(obj.i in obj.d){obj.item=obj.d[obj.i];if(obj.item.child!=undefined){option.push('<optgroup label="'+obj.item.pdesc+'">');for(obj.j in obj.item.child){obj.val=obj.item.child[obj.j];option.push('<option value="'+obj.val.cid+'">'+obj.val.cdesc+'</option>');}
option.push('</optgroup>');}else{option.push('<optgroup label="'+obj.item.cdesc+'">');option.push('<option value="'+obj.item.cid+'">'+obj.item.cdesc+'</option>');option.push('</optgroup>');}}}
callback(option);}
var menuId='';function ajax_pagination(url,pop_div){var obj={};obj.SRC=url;obj.DATATYPE='TEXT';if($('.main_body').length>0){obj.div=$('.main_body');}else{obj.div=$('html');}
$('#rotator').height(obj.div.height()-400);$('#rotator').show();$app.io.makeRequest(obj,function(r){$(pop_div).html(r);closerotator();$("html, body").animate({scrollTop:$(pop_div).offset().top},300);try{googletag.pubads().refresh([slot1,slot3]);}catch(e){}
try{Custom.init();}catch(e){}});uTrack(url);return false;}
function getResumeListForPopup(jobid,obj){}
function applyWithoutResumePopup(){}
function openResumePopup(jobid){}
function openrotator(div){div=div||$('div.container');$('#rotator').height(div.height());$('#rotator').show();}
function closerotator(){$('#rotator').hide();}
function set_cookies_nextURL(url){var href;href=url||top.window.location.href;if(href.indexOf('next=')!=-1){href=href.split('next=');try{$.cookie('next',href[1],{expires:1,path:'/'});}catch(e){$app.debug(e);}}}
function process_cookies_nextURL(){var href;try{href=$.cookie('next');if(href!==null&&href!==undefined&&(href.indexOf('http://')!==-1||href.indexOf('https://')!==-1)){$.cookie('next','',{expires:0,path:'/'});top.window.location=href;}}catch(e){$app.debug(e);}}
function setnext(url){set_cookies_nextURL(url);top.window.location=url;}
function Expectederror(){try{$app.overLay(false);$('#rotator').css('display','none');}catch(e){}
var html,div;var a=generalFunctions.copyObject($app.dialog_obj);div=$('.cls_popup_candidate');div.attr('title','Alert');div.dialog(a);div.dialog('open');html=[];html.push('<div class="custom_question"><b>Sorry! Something went wrong. \n Please try after some time...');html.push('</b></div>');div.html(html.join(' '));}
function popupforemailchange(){var html,locObj,div;locObj={};var a=generalFunctions.copyObject($app.dialog_obj);div=$('.cls_popup_candidate');div.attr('title','Alert');div.dialog(a);div.dialog('open');html=[];html.push('<div class="custom_question"><b>Your email id has been successfully changed.');html.push('Please use '+$app.clientData.email+' to login in to Shine from next time.</b>');html.push('<div class="divokbutton"><input type="button" value="Ok" class="okbutton cls_candidateforgot_canc" /></div></div>');div.html(html.join(' '));}
function opaquestatus(disp){disp=disp||'none';try{document.getElementById('opaque').style.display=disp;}catch(e){$app.debug(e);}}
function uTrack(t){try{t=t.replace(sc.url_prefix,'');t=(t.indexOf('/')!=0)?'/'+t:t;ga('send','pageview',t);}catch(e){setTimeout(function(){try{ga('send','pageview',t);}catch(e){$app.debug(e);}},3000);$app.debug(e);}};var console_msg=function(message){try{if(!(~top.window.location.origin.indexOf('shine.com'))){console.log(message);}}catch(e){}};function serviceWorkerInstall(){function sendMessageToParent(data){try{console_msg(data);$('#opaque').hide();var obj={};obj.options={};obj.popUp=$('#notification_popup');obj.options['buttons']={'Ok':{'text':'Ok','click':function(){obj.popUp.dialog('close');}}};obj.options['close']=function(){common.setSessionStorage('next_popup_prompt_time',new Date().getTime()+(7*ONE_DAY));};if(sc.isFromMsite!=undefined){obj.options['width']='90%';}
else{obj.options['width']='350';}
obj.options['height']='200';obj.options['open']=function(){if(Notification.permission=='denied'){$('.notification_msg').html("You have blocked notifications from your Browser settings. \nPlease use <a href='https://support.google.com/chrome/answer/3220216?hl=en'>this</a> support link to un-block.");}else{$('.notification_msg').html("Unable to subscribe to push notifications.");}};if(typeof sessionStorage.pushMessage=="undefined"){dialogCreate.updateOption(obj.options);dialogCreate.dialogOpen(obj.popUp);sessionStorage.pushMessage='show';}}catch(e){console_msg(e);}}
function sendGCMIdToParent(sub_data){try{if(sub_data){console_msg(sub_data);window.postMessage({sender:'sw-installer',message:sub_data,success:'true',noti_perm:Notification.permission},'*');}}catch(e){console_msg(e);}}
if('serviceWorker'in navigator){$('#opaque').hide();navigator.serviceWorker.register(sc.url_prefix+'static/js/push/service-worker.js').then(function(serviceWorkerRegistration){console_msg('ServiceWorker registration successful with scope: ',serviceWorkerRegistration.scope);if(!serviceWorkerRegistration.pushManager){sendMessageToParent('Push Is not Supported');return;}
if(!('showNotification'in ServiceWorkerRegistration.prototype)){sendMessageToParent('Notifications aren\'t supported.');return;}
if(Notification.permission==='denied'){sendMessageToParent('The user has blocked notifications.');return;}
if(!('PushManager'in window)){sendMessageToParent('Push messaging isn\'t supported.');return;}
Notification.requestPermission(function(status){console_msg(status);if(status==='denied'){common.setSessionStorage('push_notification_check',true,1);sendMessageToParent('Permission for Notifications was denied');common.setSessionStorage('next_popup_prompt_time',new Date().getTime()+(5*ONE_DAY));if(window.location.pathname.indexOf('/jobs/apply/')>-1){MyGA.SendEvent('push_notification','push_notification','Denied through notification','Post Apply Page');}
else if(window.location.pathname.indexOf('/recruiter-activities/')>-1){MyGA.SendEvent('push_notification','push_notification','Denied through notification','Recruiter activities');}
else if(window.location.pathname.indexOf('job-search/')>-1){MyGA.SendEvent('push_notification','push_notification','Denied through notification','Job Search');}
else if(window.location.pathname.indexOf('/home/')>-1){MyGA.SendEvent('push_notification','push_notification','Denied through notification','Home');}
else{MyGA.SendEvent('push_notification','push_notification','Denied through notification','clicked');}}
else if(status=='default'){MyGA.SendEvent('push_notification','push_notification','closed through notification','clicked');common.setSessionStorage('next_popup_prompt_time',new Date().getTime()+(1*ONE_DAY));common.setSessionStorage('push_notification_check',true,1);}
else{serviceWorkerRegistration.pushManager.getSubscription().then(function(subscription){if(!subscription||subscription.endpoint.indexOf("gcm")!=-1){console_msg('We aren"t subscribed to push');if(subscription){subscription.unsubscribe()}
serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true}).then(function(subscription){console_msg('Subscribed to Push Notifications');common.setSessionStorage('push_notification_allowed',true);common.setSessionStorage('push_notification_check',true,1);console_msg(JSON.stringify(subscription));sendGCMIdToParent(JSON.stringify(subscription));pushNotifcationObj.onGcmUpdate(JSON.stringify(subscription));if(window.location.pathname.indexOf('/jobs/apply/')>-1){MyGA.SendEvent('push_notification','push_notification','Allowed through notification','Post Apply Page');}
else if(window.location.pathname.indexOf('/recruiter-activities/')>-1){MyGA.SendEvent('push_notification','push_notification','Allowed through notification','Recruiter activities');}
else if(window.location.pathname.indexOf('job-search/')>-1){MyGA.SendEvent('push_notification','push_notification','Allowed through notification','Job Search');}
else if(window.location.pathname.indexOf('/home/')>-1){MyGA.SendEvent('push_notification','push_notification','Allowed through notification','Home');}
else{MyGA.SendEvent('push_notification','push_notification','Allowed through notification','clicked');}}).catch(function(e){if(Notification.permission==='denied'){sendMessageToParent('Permission for Notifications was denied');MyGA.SendEvent('push_notification','push_notification','Denied through notification','clicked');}else{sendMessageToParent('Unable to subscribe to push.'+e);}});}else{console_msg('We are already subscribed to push');console_msg(JSON.stringify(subscription));sendGCMIdToParent(JSON.stringify(subscription));}}).catch(function(err){sendMessageToParent('Error during getSubscription()'+err);});}});}).catch(function(err){sendMessageToParent('ServiceWorker registration failed: '+err);});}else{$('#opaque').hide();sendMessageToParent('ServiceWorker not available');}};var INSTALLED_SW_VERSION=2;var ONE_DAY=86400000;var pushNotificationBase=function(){};pushNotificationBase.prototype={Constructor:pushNotificationBase,basefunction:function(){var that=this;that.noti_popup=$('#push_noti_popup');that.noti_popup_mob=$('#push_noti_mob_popup');that.serviceWorkerCheck();},serviceWorkerCheck:function(){var that=this;if(!('serviceWorker'in navigator)||!('PushManager'in window)||(typeof PushSubscription.prototype.getKey=='undefined')){return;}
that.localstoreCheck();},localstoreCheck:function(){var normalised_can_id=sc.UID,gcm_data=JSON.parse(common.getSessionStorage('gcm_data')),that=this;if(normalised_can_id=='0'||normalised_can_id==0)
normalised_can_id='';if(gcm_data&&gcm_data.endpoint.indexOf("gcm")!=-1){serviceWorkerInstall();}
if(common.getSessionStorage('curr_valid_can_id')&&common.getSessionStorage('curr_valid_can_id')==normalised_can_id){return;}else if(common.getSessionStorage('curr_valid_can_id')&&normalised_can_id==''){return;};that.gcmCheck();},gcmCheck:function(){var that=this,gcm_data;try{if(common.getSessionStorage('gcm_data')&&common.getSessionStorage('gcm_data')!=''){gcm_data=JSON.parse(common.getSessionStorage('gcm_data'));}}catch(err){}
if(gcm_data){var event={};event.data={};event.data.message=gcm_data;event.data.sw_version=INSTALLED_SW_VERSION;that.onGcmUpdate(JSON.stringify(event.data.message));}else{if(!isNaN(common.getSessionStorage('next_popup_prompt_time'))&&new Date().getTime()<common.getSessionStorage('next_popup_prompt_time')){return;}
if(Notification.permission!='granted'){if(!common.getSessionStorage('push_notification_allowed')){common.setSessionStorage('push_notification_check',true,1);that.showNotiPopup();}}
else if(Notification.permission=='granted'&&!gcm_data){that.showNotiPopup();}}},console_msg:function(message){try{if(!(~top.window.location.origin.indexOf('shine.com'))){}}catch(e){}},onGcmUpdate:function(event){var that=this,endpoint_data='',gcm_id='',key_data={};try{var s_data=JSON.parse(event);endpoint_data=s_data.endpoint;gcm_id=s_data.endpoint.substr(s_data.endpoint.lastIndexOf('/')+1);key_data=s_data.keys;}catch(e){return;}
if(!endpoint_data||!gcm_id){common.setSessionStorage('gcm_data','');common.setSessionStorage('next_popup_prompt_time',new Date().getTime()+(1*ONE_DAY));return;}
if(!key_data){common.setSessionStorage('gcm_data','');common.setSessionStorage('next_popup_prompt_time',new Date().getTime()+(15*ONE_DAY));return;}
common.setSessionStorage('gcm_data',JSON.stringify(s_data));var GCMHitUrl=sc.url_prefix+"api/v2/web-notification-subscriber/";var getUrl=GCMHitUrl+gcm_id+"/";console_msg('Making a GET request to shine API');$.ajax({url:getUrl,dataType:'json',contentType:'application/json',type:'GET',success:function(r){console_msg(r);if(r.candidate_id==sc.UID){common.setSessionStorage('curr_valid_can_id',sc.UID);var gcm_data=JSON.parse(common.getSessionStorage('gcm_data'))
if(gcm_data.endpoint.indexOf("gcm")!=-1){that.addGcmId('PUT',getUrl,endpoint_data,key_data,gcm_id);}}else{that.addGcmId('PUT',getUrl,endpoint_data,key_data,gcm_id);}},statusCode:{404:function(){that.addGcmId('POST',GCMHitUrl,endpoint_data,key_data,gcm_id);}}});},addGcmId:function(methodType,hitUrl,endpoint_data,key_data,gcm_id){var web_browser_type='1';try{var isFirefox=typeof InstallTrigger!=='undefined';var isSafari=/constructor/i.test(window.HTMLElement)||(function(p){return p.toString()==="[object SafariRemoteNotification]";})(!window['safari']||(typeof safari!=='undefined'&&safari.pushNotification));var isChrome=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime);if(isChrome)
web_browser_type='1';else if(isFirefox)
web_browser_type='2';else
web_browser_type='3';}catch(e){}
console_msg('Making a '+methodType+' request to shine API');$.ajax({url:hitUrl,dataType:'json',contentType:'application/json',type:methodType,data:JSON.stringify({candidate_id:sc.UID,browser_type:web_browser_type,endpoint:endpoint_data,keys:key_data,version:INSTALLED_SW_VERSION,device_id:gcm_id}),success:function(r){common.setSessionStorage('curr_valid_can_id',sc.UID);},error:function(e){}});},showSubscribingDialog:function(){var that=this;$('#opaque').show();serviceWorkerInstall();},showNotiPopup:function(){var that=this;if(sc.isFromMsite!=undefined){that.mobilePopFunction()}else{that.webPopFunction()}},mobilePopFunction:function(){var that=this,_bottomPosition=0;that.noti_popup_mob.css({'display':'block','bottom':_bottomPosition});if($('.js-close-noti-popup')){that.closeAction($('.js-close-noti-popup'))}
if($('.js-open-noti-popup')){that.allowedAction($('.js-open-noti-popup'))}
if($('.js-hide-noti-div')){that.closeAction($('.js-hide-noti-div'))}},webPopFunction:function(){var that=this;that.noti_popup.css({"display":"block"});if($('.js-close-noti-popup')){that.closeAction($('.js-close-noti-popup'))}
if($('.js-open-noti-popup')){that.allowedAction($('.js-open-noti-popup'))}
if($('.js-hide-noti-div')){that.closeAction($('.js-hide-noti-div'))}},closeAction:function(element){var that=this;var hidePopup=function(){sc.isFromMsite==1?that.noti_popup_mob.css({"display":"none"}):that.noti_popup.css({"display":"none"});};var showPopup=function(){sc.isFromMsite==1?that.noti_popup_mob.css({"display":"block"}):that.noti_popup.css({"display":"block"});};element.on('click',function(){common.setSessionStorage('next_popup_prompt_time',new Date().getTime()+(ONE_DAY));$(document).off('focus','input, textarea',hidePopup);$(document).off('blur','input, textarea',showPopup);sc.isFromMsite==1?(that.noti_popup_mob.css({"display":"none"}),typeof changePos!=="undefined"?changePos():''):that.noti_popup.css("display","none");});},allowedAction:function(element){var that=this;var hidePopup=function(){sc.isFromMsite==1?that.noti_popup_mob.css({"display":"none"}):that.noti_popup.css({"display":"none"});};var showPopup=function(){var that=this;sc.isFromMsite==1?that.noti_popup_mob.css({"display":"block"}):that.noti_popup.css({"display":"block"});};element.on('click',function(){$(document).off('focus','input, textarea',hidePopup);$(document).off('blur','input, textarea',showPopup);that.showSubscribingDialog();sc.isFromMsite==1?(that.noti_popup_mob.hide(),typeof changePos!=="undefined"?changePos():''):that.noti_popup.hide();});}}
var pushNotifcationObj=new pushNotificationBase();if(!sc.LOGGEDIN){pushNotifcationObj.basefunction();}
else if(window.location.pathname.indexOf('job-search/')>-1&&sc.LOGGEDIN){pushNotifcationObj.basefunction();}